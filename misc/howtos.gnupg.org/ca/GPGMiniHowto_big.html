<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.21">
 <TITLE>Gnu Privacy Guard (GnuPG) Mini Howto (Català)</TITLE>
</HEAD>
<BODY>
<H1>Gnu Privacy Guard (GnuPG) Mini Howto (Català)</H1>

<H2>Michael Fischard v. Mollard
<A HREF="mailto:fischer@math.uni-goettingen.de">&lt;fischer@math.uni-goettingen.de&gt;</A> (versió original en alemany)<BR>
Brenno J.S.A.A.F. de Winter 
<A HREF="mailto:brenno@dewinter.com">&lt;brenno@dewinter.com&gt;</A> (versió en anglès)<BR>
Horacio 
<A HREF="mailto:homega@ciberia.es">&lt;homega@ciberia.es&gt;</A> (versió en castellà)<BR>
Josep Monés i Teixidor 
<A HREF="mailto:jmones@puntbarra.com">&lt;jmones@puntbarra.com&gt;</A> (versió en català)<BR></H2>Versió 0.1.3, 17 de maig de 2002
<HR>
<EM> Aquest document mostra com emprar GNU Privacy Guard
(GnuPG), un sistema de xifratge de codi obert (programari lliure)
compatible amb OpenPGP. Per poder mantenir aquest programa totalment
lliure s'ha evitat l'ús de l'algoritme RSA i d'altres algoritmes
patentats. El document original el va escriure Michael Fischer v.
Mollard en alemany. Va ser posteriorment traduït a l'anglès, i
revisat, per Brenno J.S.A.A.F. de Winter. Finalment, va ser traduït al
castellà i novament revisat a partir de la versió anglesa. El document
en català es basa principalment en la darrera revisió de la versió
anglesa però també inclou la traducció d'un capítol només present en la versió en castellà.</EM>
<HR>
<H2><A NAME="GPGMinihowto-ConceptesBasics"></A> <A NAME="s1">1. Conceptes bàsics</A></H2>










<H2><A NAME="ss1.1">1.1 Xifratge de clau pública</A>
</H2>

<P>Per poder entendre millor el sistema de xifratge emprat pels
sistemes de claus asimètriques (de claus públiques i privades), és
necessari entendre la diferència amb els sistemes de claus simètriques
(claus secretes).</P>

<P>Els sistemes de xifratge de <EM>clau simètrica</EM> són aquells en els
que la clau que s'empra per xifrar les dades és la mateixa que
s'utilitza per desxifrar-los. En el cas del correu electrònic, el
remitent xifra el missatge amb una <EM>clau secreta</EM>, perquè el
destinatari el pugui desxifrar, necessita obtenir prèviament aquesta
mateixa clau de manera &laquo;segura&raquo;, o sigui, de manera que
terceres persones no tinguin l'oportunitat d'obtenir aquesta clau. Si
no es té certesa que l'intercanvi de claus ha estat segur, la validesa
del sistema és nul·la.</P>

<P>Els sistemes de xifratge amb <EM>claus asimètriques</EM>, en canvi,
empren dues claus diferents per al xifratge i el desxifratge de les
dades. El el cas anterior del correu electrònic, el remitent empraria
la <EM>clau pública</EM> del destinatari per xifrar el missatge, i el
destinatari desxifraria el missatge amb la seva pròpia <EM>clau
privada</EM>. Així doncs, la <EM>clau privada</EM> no ha de ser accessible per
a <B>ningú</B> que no en sigui el propietari, mentre que la <EM>clau
pública</EM>, pot ser entregada a qualsevol persona. En un sistema de
xifratge ben implementat, la <EM>clau privada</EM> no es pot obtenir a
partir de la <EM>clau pública</EM>.</P>

<P>El punt crucial de tot aquest sistema és que la <EM>clau privada</EM>
ha de mantenir-se en secret i només el seu propietari hi ha de tenir
accés. NO ENVIEU AQUESTA CLAU A TRAVÉS D'INTERNET. De la mateixa
manera és molt perillós utilitzar GnuPG a través de <CODE>telnet</CODE>
(considereu la possibilitat de no emprar mai telnet degut als riscos
de seguretat importants que presenta).</P>

<H2><A NAME="ss1.2">1.2 Signatures digitals</A>
</H2>

<P>El concepte de <B>signatura digital</B> es basa en la verificació de
l'autoria d'un missatge. Això vol dir que el destinatari d'un missatge
pot comprovar que el «suposat» remitent és qui diu que és. Per fer-ho,
el remitent, una vegada ha escrit el missatge, el signa emprant la
seva pròpia clau privada. El destinatari, una vegada ha rebut el
missatge, comprovarà l'autenticitat d'aquest, és a dir, el verificarà
emprant la clau pública del remitent.</P>

<P>Aquest mètode és d'especial utilitat per a reduir els riscos de
seguretat en els nostres sistemes (ens podrien enviar un suposat pegat
per a un programa, i ser en realitat un virus o un troià); també
podrien enviar-nos informació o dades, com provinents d'una font
lícita o fiable. En ambdós casos, no seria gaire difícil falsificar la
direcció i el nom del remitent, però sí impossible falsificar-ne la
signatura digital.</P>

<P>Com ja hem comentat, la verificació d'un missatge signat
digitalment es duu a terme mitjançant l'ús de la <EM>clau pública</EM> del
remitent <B>sobre el text</B> del propi missatge. D'aquesta manera no
només podem verificat la identitat de l'autor, sinó que també podem
comprovar la integritat del missatge, ja que la signatura digital ha estat
generada amb el <B>text</B> i la <B>clau privada</B>. Així doncs, una
alteració o modificació del text «a posteriori», o qualsevol
manipulació del missatge (especialment si fem ús de les
especificacions MIME/PGP), donaria com a resultat un error en la
verificació.</P>

<H2><A NAME="ss1.3">1.3 Anells de confiança </A>
</H2>

<P>Un punt feble dels algoritmes de clau
asimètrica és la transmissió de les claus públiques. Un intrús podria
posar en circulació una clau pública amb un identificador d'usuari
fals. Si es xifren missatges amb aquesta clau, l'intrús podria
desxifrar i llegir els missatges. Si llavors l'intrús el xifrés amb la
clau pública autèntica de l'usuari i li passés, aquest atac no seria
perceptible.</P>

<P>La solució de <CODE>PGP</CODE> (i per tant la solució de <CODE>GnuPG</CODE>) és la
signatura de les claus. La clau pública d'un usuari pot estar
<B>signada</B> per altres usuaris. L'objectiu d'aquestes signatures és
que l'usuari que signa reconeix que l'UID (identificador d'usuari) de
la clau signada pertany a l'usuari a qui diu que pertany. A partir
d'aquí és responsabilitat de l'usuari de <CODE>GnuPG</CODE> decidir fins a
quin punt es refia de la signatura. Una clau es pot consiferar fiable
que es confia en el remitent i se sap amb seguretat que la clau
signant pertany a aquella persona. Només quan es pot confiar plenament
en la clau del signant, es pot confiar en la clau a la que signa (i en
les signatures generades amb aquesta clau). Per tenir la seguretat que
la clau és correcta, s'ha de comparar amb la seva <B>empremta
digital</B> mitjançant un mitjà de canal fiable. Per exemple, podríem
buscar el seu telèfon a la guia i trucar-lo, demanant-li que ens
digues l'empremta digital a viva veu per tal de poder-li donar
confiança absoluta.</P>


<H2><A NAME="ss1.4">1.4 Límits de seguretat</A>
</H2>

<P>Si el que es vol és mantenir la confidencialitat de les dades
que es posseixen, no n'hi ha prou amb determinar quin algoritme de
xifratge cal emprar; és necessari també pensar amb la seguretat general
del sistema. En principi, <CODE>PGP</CODE> està considerat com suficientment
segur, i fins aquest moment, no se sap de cap cas en el que una clau
PGP hagi estat trencada. Això no vol dir que tot el que s'ha xifrat
sigui segur. Per exemple, si la NSA (l'Agència de Seguretat Nacional
dels EUA) hagués aconseguit trencar una clau PGP d'alguna manera,
probablement no ho farien públic. Però, encara que les claus de PGP
fossin absolutament impossibles de trencar, hi ha d'altres tipus
d'atacs que poden ser utilitzats per trencar-ne la seguretat. A
principis de febrer de 1999, es va descobrir un troià que cercava
claus privades de PGP en el disc dur i els transferia mitjançant FTP.
Si s'hagués escollit una contrasenya feble, un atacant podria haver
obtingut fàcilment les claus privades.</P>

<P>Una altra possibilitat tècnica (encara que més difícil) és la d'un
troià que recollís tot el que s'escriu pel teclat i ho transmetés a
l'atacant. També és possible, encara que difícil, passar el contingut
d'una pantalla a una altra. En aquest cas, no caldria fer cap anàlisi
de les dades xifrades, ja que es tindria accés a les dades abans de
xifrar.</P>

<P>Per tot això, és necessari una planificació de la seguretat que
estigui ben prevista i que en minimitzi els perills.</P>

<P>La idea no és crear una atmosfera de paranoia entre la gent, sinó
deixar clar que per tenir un sistema segur no n'hi ha prou amb
instal·lar un programa criptogràfic, ja que, si bé és un pas cap a un
sistema més segur, no és la solució completa. Troians com els que
aparegueren el març del 1999 amb el virus Melissa van demostrar que
moltes empreses no estan preparades pel que fa a la seguretat.</P>


<H2><A NAME="s2">2. Instal·lació </A></H2>

<H2><A NAME="ss2.1">2.1 Codi font de GnuPG.</A>
</H2>

<P>El web oficial per la descàrrega de <CODE>GnuPG</CODE> és
<A HREF="http://www.gnupg.org/download.html">la pàgina oficial de GnuPG</A>.
Allà també hi trobareu els enllaços a rèpliques oficials. </P>


<P>Degut a restriccions legals no es permet descarregat material
criptogràfic des de servidors localitzats als EUA a les persones que
no hi resideixen. Als EUA existeixen lleis que restringeixen
l'exportació de codi criptogràfic així com dels programes que
l'inclouen. Per aquesta raó PGP sempre es troba disponible en dues
versions: una internacional i l'altra per als EUA.</P>

<P>El codi font de la versió internacional es va exportar en format de
text ascii imprimit en un llibre. A continuació es va escanejar a
Europa (Oslo). Se'n pot obtenir més informació a la 
<A HREF="http://www.pgpi.com">pàgina international de PGP</A>.
La versió internacional de PGP pot ser importada lliurement als EUA
sempre i que no es torni a reexporta-la.</P>

<P>Si ja teniu instal·lada una versió de <CODE>GnuPG</CODE> o <CODE>PGP</CODE>,
hauríeu de comprovar la signatura del fitxer (vegeu
<A HREF="#GPGMinihowto-Signatures">Signatures</A>).</P>

<H2><A NAME="ss2.2">2.2 Configuració </A>
</H2>

<P> Es pot obtenir GnuPG com a un paquet binari de
<A HREF="http://www.debian.org/">Debian</A> 
(.deb), com a un paquet binari de 
<A HREF="http://www.redhat.com/">RedHat</A> (.rpm),
o en codi font.</P>

<P>GnuPG s'inclou en la darreres distribucions de RedHat Linux. Si
aquestes distribucions, per comprovar si teniu GnuPG instal·lat en el
vostre sistema, empreu:</P>
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
rpm -q gnupg
</PRE>
<HR>
</CODE></BLOCKQUOTE>
  </P>
<P>Els paquests esmentats són fitxers comprimits que es poden instal·lar
amb les eines corresponents, segons la distribució. Si necessiteu
instal·lar GnuPG en altres sistemes operatius, necessitareu
compilar-lo a partir del codi font. S'agraïrà que qui compili un
paquet d'instal·lació per altres sistemes o arquitectures, el faci de
domini públic.</P>

<P> Com que la gran part del desenvolupament de GnuPG es fa en
màquines x86 sota 
<A HREF="http://www.linux.org/">Linux</A>,
l'adaptació del programa a d'altres sistemes diferents no hauria de
suposar cap problema. La llista de sistemes operatius suportats per
GnuPG es pot trobar a les pàgines de
<A HREF="http://www.gnupg.org/">GnuPG</A>. El procediment que
es descriu a continuació no és exclusiu de cap plataforma. Aquest
procediment es pot utilitzar per instal·lar GnuPG a partir d'un
fitxer comprimit de codi font (.tar.gz).</P>


<P>Descomprimiu i desarxiveu el paquet amb el codi font amb l'ordre
(suposant que teniu <CODE>Gnu tar</CODE> instal·lat):</P>
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ tar xvzf gnupg-?.?.?.tar.gz
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>

<P>Després de desempaquetar-lo, canvieu al directori on heu
descomprimit el codi font. Llavors executeu:</P>
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ ./configure
</PRE>
<HR>
</CODE></BLOCKQUOTE>
  </P>

<P>Amb aquest pas no hauria de succeir res d'especial. Si executeu</P>
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ ./configure --help
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>podeu veure les opcions de configuració disponibles per a la
compilació. Si apareixen problemes referents a la internacionalització
(GET text), podeu incloure una versió que està inclosa amb el codi
font emprant la opció <CODE>--with-included-gettext</CODE>, o bé
desactivar la internacionalització amb l'opció <CODE>--disable-NLT</CODE>.</P>

<H2><A NAME="ss2.3">2.3 Compilació</A>
</H2>

<P>A continuació, compileu el codi font amb l'ordre:</P>
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ make
</PRE>
<HR>
</CODE></BLOCKQUOTE>
 </P>

<P>La compilació hauria de transcórrer sense cap problema. Si passés
quelcom anormal seguiu els passos següents (en el mateix ordre en què
es descriuen aquí): Primer proveu de solucionar-ho vosaltres mateixos
(fent ús de la documentació existent). Llavors assegureu-vos que el
vostre problema no és un error conegut (comproveu el fitxer BUGS a
<A HREF="http://www.gnupg.org/">http://www.gnupg.org</A>. Si
cap d'aquests passos no solucionen el vostre problema, envieu la
vostra pregunta a la llista de correu de GnuPG (en anglès) (vegeu
<A HREF="#GPGMinihowto-FontsInformacio">Fonts d'informació</A>). 
Si el vostre problema està relacionat amb la ruta d'accés, podeu
provar <CODE>make clean</CODE>, executar <CODE>./configure</CODE> un altre cop i
intentar una vegada més compilar (amb <CODE>make</CODE>). </P>


<H2><A NAME="ss2.4">2.4 Instal·lació</A>
</H2>

<P>Llavors escriviu:</P>
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ make install 
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>que copiarà el programa i les pàgines del manual al directori
d'instal·lació. Si no heu canviat el directori d'instal·lació en
executar <CODE>./configure</CODE>, llavors el directori d'instal·lació
serà <CODE>/usr/local/share/gnupg</CODE>. Podeu trobar aquest directori en
el fitxer <CODE>options.skel</CODE>. Si canvieu <CODE>options.skel</CODE>, si es
copia a <CODE>~/.gnupg/options</CODE> els ajustaments apropiats s'usaran
de forma predeterminada. L'acció de copiar haria de realitzar-se
automàticament en crear <CODE>~/.gnupg/</CODE>. Totes les opcions
possibles estan ben documentades i provar d'explicar-les aquí no seria
de gaire utilitat.</P>

<P>Podeu executar GnuPG com a suid root. D'aquesta manera, el
programa s'executa amb tots els drets que té el superusuari, i
s'exclou la possibilitat que certes parts del sistema es desin
externament i altres persones les puguin llegir. No m'és possible de
valorar els riscos d'executar el programa com a superusuari. Però
executant el programa com a suid root s'hauria d'estar alerta dels
perills de cavalls de Troia, ja que un troià executant-se com a
superusuari podria malmetre tit el sistema. Si per aquesta raó (o per
qualsevol altra) escolliu de no executar GnuPG com a superusuari,
podeu desactivar l'avís activant <CODE>no-secmem-warning</CODE> a
<CODE>~/.gnupg/options</CODE>.</P>


<H2><A NAME="GPGMinihowto-Claus"></A> <A NAME="s3">3. Ús i gestió de les claus</A></H2>

<H2><A NAME="ss3.1">3.1 Generant una clau</A>
</H2>

<P>Amb l'ordre</P>
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ gpg --gen-key
</PRE>
<HR>
</CODE></BLOCKQUOTE>
 </P>
<P>podeu general un nou parell de claus (el parell es composa de clau
pública i clau privada). La primera pregunta és quin algoritme
s'emprarà. Podeu llegir més a propòsit dels algoritmes a
<A HREF="http://www.hertreg.ac.uk/ss/pgpfaq.html">PGP DH vs. RSA FAQ</A>
o a 
<A HREF="#BSchneier">Applied Cryptography</A>.  L'algoritme
recomanat per GnuPG és DSA/ElGamal, ja que no està patentat.</P>

<P>La següent pregunta és la longitud de la clau. Aquesta decisió
depèn molt de cada usuari. Heu d'escollir entre la seguretat i el
temps de càlcul. Si una clau és més llarga, el risc de trencar el
missatge si és interceptat decreix. Però amb claus més llarges el
temps de càlcul també augmenta. Si el temps de càlcul és un problema,
heu de tenir en compte que voleu emprar la clau durant algun temps.
Tothom sap que el rendiment aritmètic augmenta molt ràpidament, ja que
els nous processadors són cada vegada més ràpids. Tingueu això en
compte. La llargada mínima requerida per GnuPG és de 768 bits, encara
que molta gent opina que hauria de ser de 2048 (que és el màxim de
GnuPG en aquest moment). Per a DSA, 1024 és una llargada fixa. Si la
seguretat té prioritat envers el temps de càlcul, hauríeu d'escollir
la mida de clau més llarga disponible.</P>


<P> El sistema demana a continuació que introduïu el nom, un comentari
i l'adreça de correu electrònic. La clau es clacula en base a aquestes
dades. Podeu canviar aquesta informació més tard (vegeu
<A HREF="#GPGMinihowto-Administracio">Administració de claus</A>.
La direcció de correu electrònic que escolliu hauria de ser vàlida, ja
que serà emprada per signar l'identificador d'usuari. Si aquesta
direcció es modifica d'alguna manera, la signatura no es
correspondria.</P>

<P> Finalment heu d'introduir una contrasenya. Noteu la diferència
entre els termes anglesos per la paraula &laquo;contrasenya&raquo;: el
terme &quot;password&quot; denota una &quot;paraula de pas&quot;,
mentre que el terme &quot;passphase&quot; denota una &quot;frase de
pas&quot;. Per tant, aquesta contrasenya s'ha de composar de més
d'una paraula. Per a que una contrasenya sigui efectiva (segura),
haurà de contenir els elements següents:
<UL>
<LI>ha de ser llarga;</LI>
<LI>ha de combinar majúscules, minúscules i nombres;</LI>
<LI>ha de contenir caràcters especials (no alfanumèrics);</LI>
<LI>ha de ser difícil d'endevinar (no ha de ser, doncs, noms, dates
de naixement, números de telèfon, de targeta de crèdit o de compte
corrent, noms i nombre de fills, ...). </LI>
</UL>
</P>

<P>En general, per tal d'aconseguir una contrasenya forta és
aconsellable intercal·lar maJúsCUlEs amb mInÚScuLEs, nombres, i
d'altres caràcters no alfanumèrics. En escollir les paraules i les
frases s'han d'evitar les paraules massa òbvies, dates significatives,
i no heu d'emprar mai cites de llibres o frases cèlebres. Dit això,
heu d'assegurar-vos que la contrasenya que escolliu sigui
suficientment difícil perquè no pugui ser vulnerada amb un &laquo;atac
de força bruta&raquo;, ni tan sols per un &laquo;atac de
diccionari&raquo;, però suficientment fàcil perquè NO LA OBLIDEU. Si
oblidéssiu la vostra contrasenya, la clau quedaria totalment
inutilitzada, i tota la informació que s'hagi xifrat amb aquesta clau
no podria ser desxifrada. Per tal d'evitar aquesta possibilitat es
recomana crear certificats de revocació junt amb les claus (vegeu
<A HREF="#GPGMinihowto-Revocant">Revocació</A>).</P>

<P> Una vegada que s'han introduït totes les dades necessàries, el
sistema comença a generar les claus. Aquest procés triga un temps que
depèn de la llargada de les claus. Durant aquest procés, el programa
recull dades aleatòries que emprarà per generar les claus; una manera
d'ajudar a fer més aleatori aquest procés és cambiar a una consola
virtual diferent i emprar el teclat mentre el procés està en marxa. La
clau que genereu sempre serà diferent. Si genereu una clau ara i una
altra d'aquí 5 minuts amb exactament la mateixa informació, obtindreu
dues claus diferents. Aquesta és la raó per la qual no heu d'oblidar
mai la vostra contrasenya.</P>


<H2><A NAME="ss3.2">3.2 Exportant claus</A>
</H2>

<P>L'ordre per exportar una clau d'un usuari
és la següent:</P>
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ gpg --export [UID]
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>Si no es designa cap identificador d'usuari (UID) s'exportaran totes
les claus presents. El resultat s'envia per defecta a <CODE>stdout</CODE>,
però amb l'opció <CODE>-o</CODE> podem especificar que s'envïi a un fitxer. Es
recomana emprar l'opció <CODE>-a</CODE> per tal de que el resultat sigui un
fitxer de ASCII de 7 bits en comptes d'un fitxer binari.</P>


<P> Si exporteu les vostra clau pública, la podeu facilitar a les
persones amb les que voleu comunicar-vos de forma segura. La clau es
pot exportar publicant-la a la vostra plana <EM>web</EM>, emprant
<EM>finger</EM>, <EM>ftp</EM>, enviant-la a un servidor de claus públiques com
per exemple http://www.pca.dfn.de/dfnpca/pgpkserv/, o qualsevol altre
mètode.</P>


<H2><A NAME="ss3.3">3.3 Important les claus</A>
</H2>

<P>En rebre la clau pública d'algú (o vàries claus públiques), les heu
d'afegir a la vostra base de dades de claus per tal de poder-les
utilitzar. Per importar-les a la base de dades, heu d'executar l'ordre
següent:
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ gpg --import [nom del fitxer]
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>

<P> Si s'omet el nom del fitxer, les dades es llegiran de <CODE>stdin</CODE>.
El fitxer pot contenir una sola clau o més d'una, que pertanyin a una
o més persones.</P>

<H2><A NAME="GPGMinihowto-Revocant"></A> <A NAME="ss3.4">3.4 Revocant una clau</A>
</H2>

<P>Hi ha diverses raons per les quals podeu voler revocar una clau
existent.  Per exemple, que la clau privada hagi estat robada, hagi
canviat el UID (identificador d'usuari), que ja no sigui prou llarga,
etc. En tots aquests casos, el comandament per revocar la clau és:
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ gpg --gen-revoke
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>

<P>Això crea un <B>certificat de revocació</B>. Per poder-ho fer,
necessiteu la clau privada, sinó qualsevol podria crear un certificat
i revocar una clau que no fos seva. Això té un desavantatge, si hem
oblidat la contrasenya, la clau no serveix de res, i tampoc es pot
generar un certificat de revocació. Per aquesta raó, és aconsellable
generar un certificat de revocació en crear el parell de claus. Si ho
feu, però, guardeu-lo en un lloc segur perquè ningú no pugui
emprar-lo i revocar la clau.</P>


<H2><A NAME="GPGMinihowto-Administracio"></A> <A NAME="ss3.5">3.5 Administració de les claus</A>
</H2>

<P>En el sistema GnuPG hi ha un fitxer que actua com una mena de base
de dades. En aquest fitxer es desen totes les dades relacionades amb
les claus, inclosos els valors que fan referència al grau de confiança
(<EM>Ownertrust</EM>); per a més informació sobre el grau de confiança
llegiu 
<A HREF="#GPGMinihowto-Signant">Signant les claus</A>).</P>
<P>Amb l'ordre
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ gpg --list-keys
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>es mostraran totes les claus presents. Per veure també totes les
signatures escriviu:
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ gpg --list-sigs
</PRE>
<HR>
</CODE></BLOCKQUOTE>
 </P>
<P>(vegeu 
<A HREF="#GPGMinihowto-Signant">Signant les claus</A> per a
més informació).</P>
<P>Per veure les empremtes digitals (<EM>fingerprints</EM>) escriviu:
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ gpg --fingerprint
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>Les &quot;empremtes digitals&quot; serveixen per confirmar la
identitat d'una persona. Aquesta ordre ens mostra una llista
alfanumèrica (relacionada amb la clau) que podem compravar, per
exemple, per telèfon.</P>
<P>Per veure el llistat de claus privades escriviu:
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ gpg --list-secret-keys
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>Nota: el llistat d'empremtes digitals i de signatures de les claus
privades no té cap utilitat directa més de la de donar-nos aquesta
informació.</P>

<P>Per tal d'esborrar una clau pública executeu l'ordre:
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ gpg --delete-key UID
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>Per eliminar una clau privada escriviu:
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ gpg --delete-secret-key
</PRE>
<HR>
</CODE></BLOCKQUOTE>
 </P>

<P>Hi ha encara un altre comandament important que té relació amb la
gestió de les claus:
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ gpg --edit-key UID
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>Emprant aquesta ordre podeu editar (entre d'altres coses) la data
d'expiració, afegir una empremta digital i signar la vostra clau. Per
realitzar aquestes operacions necessiteu la contrasenya. En executar
aquesta ordre veureu una linia de comandaments.</P>

<H2><A NAME="GPGMinihowto-Signant"></A> <A NAME="ss3.6">3.6 Signant les claus</A>
</H2>

<P>Com s'ha comentat anteriorment, hi ha un taló d'Aquil·les al
sistema: l'autentificació de les claus públiques. Si teniu una clau
pública errònia, ja us podeu oblidar dels valor del xifratge. Per tal
d'evitar aquests riscos existeix la possibilitat de signar les claus.
Quan tenim la certesa que una clau és vàlida i que pertany a qui diu
que pertany, podem signar-la digitalment, de manera que la nostra
signatura donarà fe (als que confien en la nostra signatura) que
aquella clau pública correspon a aquell ID d'usuari.</P>

<P> Si executeu l'ordre:
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ gpg --edit-key UID
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>per la clau que voleu signar, podreu signar-la amb la subordre:</P>
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
Command> sign
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>

<P><B>Només heu de signar una clau quan estigueu ABSOLUTAMENT SEGURS
que la clau és autèntica!!!</B> En realitat, només es pot estar segur
quan la clau ha estat rebuda en mà, o, per exemple, si s'ha rebut per
correu i a continuació s'ha comprovar l'empremta digital de la clau
per algun altre mitjà (per exemple, per telèfon). No heu de signar mai
cap clau basant-vos en una suposició.</P>

<P>Basant-se en les signatures disponibles en una clau i en el
&laquo;grau de confiança&raquo;, <CODE>GnuPG</CODE> determina la validesa de
les claus. El grau de confiança (<EM>Ownertrust</EM>) és un valor que el
propietari d'una clau empra per determinar el nivell de confiança per
una clau concreta. Aquests valors són:</P>
<P>
<UL>
<LI>1 = Don't know (No ho sé)</LI>
<LI>2 = I do NOT trust (No hi confio)</LI>
<LI>3 = I trust marginally (Hi confio poc) </LI>
<LI>4 = I trust fully (Hi confio plenament)</LI>
</UL>
</P>
<P>Si l'usuari no es refia d'una signatura, ho pot indicar i refusar la
confiança en la mateixa. La informació sobre la confiança no es desa
en el mateix fitxer que el de les claus, sinó que en un altre
diferent.</P>

<H2><A NAME="GPGMinihowto-xifrant"></A> <A NAME="s4">4. Xifrant i desxifrant</A></H2>

<P>Després d'haver-ho instal·lat i configurat tot tal com voleu,
podeu començar a xifrar i desxifrar.</P>

<P>És possible que quan vulguem xifrar o desxifrar quelcom, tingueu
més d'una clau privada en el nostre anell de claus. Si això passa, és
necessari seleccionar-ne una com activa. Per fer-ho, es pot emprar
l'opció 
<BLOCKQUOTE><CODE>
<HR>
<PRE>
-u UID
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>o bé l'opció 
<BLOCKQUOTE><CODE>
<HR>
<PRE>
--local-user UID
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>També podeu afegir la línia següent al fitxer de configuració
<CODE>$HOME/.gnupg/options</CODE>:</P>
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
default-key UID
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>Si desitgeu indicar l'UID d'un destinatari per xifrar un fitxer amb la
seva clau, ho podeu fer amb l'opció 
<BLOCKQUOTE><CODE>
<HR>
<PRE>
-r
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>o bé l'opció 
<BLOCKQUOTE><CODE>
<HR>
<PRE>
--recipient
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>


<H2><A NAME="ss4.1">4.1 Xifrar</A>
</H2>

<P>L'ordre per xifrar és la següent: 
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ gpg -e [fitxer]
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>o bé: 
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ gpg --encrypt [fitxer]
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>El programa demanarà el UID del destinatari (o dels destinataris, és
possible posar-ne més d'un). Es pot evitar que el programa ho pregunti
emprant l'ordre:</P>
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$gpg -er [UID del destinatari] [fitxer]
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>

<P><CODE>GnuPG</CODE> generarà un fitxer xifrat amb el nom <CODE>[fitxer].gpg</CODE>.
També podem emprar l'opció: 
<BLOCKQUOTE><CODE>
<HR>
<PRE>
--armor
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>o bé 
<BLOCKQUOTE><CODE>
<HR>
<PRE>
-a
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>perquè el fitxer generat sigui del tipus ASCII de 7 bits. L'ordre
seria doncs: 
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ gpg -a -er [UID del destinatari] [fitxer]
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>Aquesta ordre generarà un fitxer codificat de nom <CODE>[fitxer].asc</CODE>
amb el format ASCII de 7 bits. </P>

<P>Heu de tenir en compte que el fet de xifrar un fitxer (o un
missatge) l'únic que fa és protegir les dades amb un xifratge que
només pot desfer el destinatari; no protegeix del risc que algú
intenti suplantar la nostra identitat. Per tal d'evitar-ho, només cal
signar digitalment tot allò que es xifri (vegeu 
<A HREF="#GPGMinihowto-Signatures">Signatures</A>).</P>

<H2><A NAME="ss4.2">4.2 Desxifrar </A>
</H2>

<P>L'ordre per desxifrar és: 
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ gpg [-d] [fitxer]
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>o bé: 
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ gpg [--decrypt] [fitxer]
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>En aquest cas no és necessària l'opció, és opcional, ja que <CODE>gpg</CODE>
utilitza per defecte: 
<BLOCKQUOTE><CODE>
<HR>
<PRE>
--decrypt
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>En els casos anteriors, el resultat es mostra a <CODE>stdout</CODE>
(habitualment la sortida de l'intèrpret d'ordres), però el podeu
redireccionar amb l'opció:
<BLOCKQUOTE><CODE>
<HR>
<PRE>
-o [fitxer]
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>, on [fitxer] és el nom del fitxer on vulgueu el resultat.</P>


<H2><A NAME="GPGMinihowto-Signatures"></A> <A NAME="s5">5. Signant i verificant signatures</A></H2>

<P>Signar i verificar signatures és una
part molt important dels sistemes de criptografia de clau pública.
L'usuari pot signar una sèrie de dades o un document, per la qual cosa
utilitza la seva clau privada. Per verificar les signatures d'altres
usuaris, és necessari obtenir prèviament les seves claus públiques.</P>


<H2><A NAME="ss5.1">5.1 Signar</A>
</H2>

<P>Per signar un fitxer amb la vostra clau, utilitzeu
l'ordre:
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ gpg -s [fitxer]
</PRE>
<HR>
</CODE></BLOCKQUOTE>

o bé
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ gpg --sign [fitxer]
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>

<P>Aquesta ordre, a més de produir una signatura digital, també
comprimeix el fitxer, per la qual cosa el resultat és un fitxer binari
il·legible. Per produir un fitxer signat legible (en format ASCII),
s'empra l'ordre: 
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ gpg --clearsign [fitxer]
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>

<P>D'aquesta manera, tant la signatura com les dades signades, són
legibles en un editor.</P>

<P>La signatura també es pot generar en un fitxer separat (de les dades).
Aquesta opció és molt recomanable especialment quan es signen fitxers
binaris (per exemple, fitxers comprimits). Per realitzar-ho s'ha
d'utilitzar l'ordre:
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ gpg -b [fitxer]
</PRE>
<HR>
</CODE></BLOCKQUOTE>

o bé
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ gpg --detach-sign [fitxer]
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>

<P>Aquest és el mode que MIME/PGP empra per signar els missatges de
correu electrònic. Aquest mode és molt útil quan s'ha de signar un
binari, per exemple, per distribuir-lo, ja que la signatura es basa en
el binari però va en un fitxer apart. L'opció <CODE>--armor</CODE> també pot
ésser d'utilitat en aquests casos.</P>

<P> Sovint haureu de signar i xifrar un fitxer alhora. L'ordre que
permet fer això és:
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ gpg [-u Remitent] [-r Destinatari] [--armor] --sign --encrypt
[fixer]
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>

<P>La funcionalitat de les opcions <CODE>-u</CODE> (<CODE>--local-user</CODE>) i
<CODE>-r</CODE> (<CODE>--recipient</CODE>) és la que s'ha descrit anteriorment.</P>

<H2><A NAME="ss5.2">5.2 Verificar</A>
</H2>

<P>En desxifrar un fitxer xifrat que també hagi estat signat
digitalment, la signatura es verifica automàticament. En tot cas, és
possible verificar la signatura simplament amb l'ordre:
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ gpg [--verify] [fitxer]
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>Aquesta ordre només funcionarà (és clar) quan tingueu la clau pública
del remitent.</P>



<H2><A NAME="s6">6. GnuPG + PGP</A></H2>

<P>En ser <CODE>PGP</CODE> un programa més antic que <CODE>GnuPG</CODE>, és normal que un
usuari nou de <CODE>GnuPG</CODE> tingui ja instal·lada alguna versió de <CODE>PGP</CODE> al
seu sistema, i que desitgi mantenir les seves claus velles després
d'actualitzar-se a <CODE>GnuPG</CODE>. Doncs bé, no només és possible importar el
contingut dels anells de claus, sinó que, alternativament, és possible que
<CODE>GnuPG</CODE> gestioni els anells de claus de <CODE>PGP 2.6.3</CODE> i <CODE>PGP 5.0</CODE>.</P>

<P>Hi ha altres &laquo;problemes&raquo; de compatibilitat que també
tractarem en aquest capítol, com són les signatures de tipus <B>V4</B>
generades per <CODE>GnuPG</CODE>, o de l'ús per part de <CODE>PGP</CODE> dels algoritmes
propietaris <CODE>RSA</CODE> o <CODE>IDEA</CODE>. Començarem per aquesta darrera qüestió.</P>

<H2><A NAME="ss6.1">6.1 Ús d'algoritmes <EM>no lliures</EM></A>
</H2>

<P>L'ús d'algoritmes amb patents restrictives per part de <CODE>PGP</CODE>
representa un problema donat que la filosofia al voltant de <CODE>GnuPG</CODE> és
la d'implementar un sistema criptogràfic lliure. Així doncs, les patents
sobre aquests algoritmes n'impossibiliten una implementació total. Però
<CODE>GnuPG</CODE> també pretén cumplir amb les normes dels
&laquo;estàndards&raquo; d'
<A HREF="http://www.d.shuttle.de/isil/gnupg/rfc2440.html">OpenPGP</A>.</P>

<P>Existeixen unes extensions per a
<A HREF="http://www.rsa.com/">RSA</A> i 
<A HREF="http://www.ascom.ch/">IDEA</A> que poden ser instal·lades
i permeten un cert ús d'aquests algoritmes. Les claus generades per <CODE>PGP
2.6.x</CODE> són del tipus <CODE>RSA</CODE>, i l'algoritme de xifratge emprat és <CODE>IDEA</CODE>
(també pot ser emprat per <CODE>PGP 5.x</CODE>). És possible conseguir el codi font
d'aquests algoritmes als fitxers  
<A HREF="ftp://ftp.guug.de/pub/gcrypt/contrib/rsa.c.Z">rsa.c</A> i 
<A HREF="ftp://ftp.guug.de/pub/gcrypt/contrib/idea.c.Z">idea.c</A>.</P>

<P>També existeixen els binaris instal·lables d'aquestes extensions per
algunes distribucions de 
<A HREF="http://www.debian.org">Linux</A>
, com per exemple 
<A HREF="http://www.debian.org">Debian</A> (comproveu-ho per a
d'altres distribucions).</P>


<H2><A NAME="GPGMiniHowto-SignaturesGnuPG"></A> <A NAME="ss6.2">6.2 Signatura digital amb GnuPG</A>
</H2>

<P><CODE>GnuPG</CODE> és l'únic sistema capaç d'implementar signatures digitals
<B>V4</B> (segons <EM>OpenPGP</EM>) i aquesta n'és l'opció per defecte, però en
aquest cas <CODE>PGP</CODE> no és capaç de verificar-les. És possible obligar a
<CODE>GnuPG</CODE> a emprar <B>V3</B>, de dues maneres:</P>
<P>
<UL>
<LI>Indicant-ho en el fitxer de configuració <CODE>$HOME/.gnupg/options</CODE>
afegint la línia:</LI>
</UL>
</P>
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
force-v3-sigs
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>
<UL>
<LI>Indicant aquesta opció cada vegada que es desitgi signar un missatge
en <B>V3</B>:</LI>
</UL>
</P>
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ gpg &lt;opció&gt; --force-v3-sigs [fitxer]
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="ss6.3">6.3 Importar anells de claus de PGP a GnuPG</A>
</H2>

<P>Intentarem explicar com exportar les claus públiques i privades des dels
nostres anells de claus <CODE>PGP</CODE> als anells de claus <CODE>GnuPG</CODE>.</P>

<P><B>NOTA: aquest mètode s'ha extret del 
<A HREF="http://technocage.com/~caskey/gpg/pgp2gnupgp.html">PGP2GnuPG</A>
Howto de Caskey L.  Dickson i no l'he provat personalment. L'última
actualització del &laquo;PGP2GnuPG Howto&raquo; data del desembre de 1998.
Per aquesta raó, i per poder integrar <CODE>PGP</CODE> amb <CODE>GnuPG</CODE>, recomano
l'ús del mètode que s'explica a la
<A HREF="#GPGMiniHowto-AnellsPGP">secció següent</A>, ja que és més senzill
i fiable.</B></P>

<P>Suposant que tingueu instal·lades dues versions de <CODE>PGP</CODE> per a
<CODE>Unix/Linux</CODE>, tenim els seus respectius anells de claus públiques i
privades a <CODE>$HOME/.pgp/</CODE>:</P>
<P>
<UL>
<LI>pubring.pgp -&gt; fitxer de claus públiques de <CODE>PGP 2.6.x</CODE></LI>
<LI>secring.pgp -&gt; fitxer de claus privades de <CODE>PGP 2.6.x</CODE></LI>
<LI>pubring.pkr -&gt; fitxer de claus públiques de <CODE>PGP  5.x</CODE></LI>
<LI>secring.skr -&gt; fitxer de claus privades de <CODE>PGP  5.x</CODE></LI>
</UL>
</P>
<P>A continuació utilitzaríem les ordres que corresponguin a cada verió per
tal d'extreure les claus que desitgem.</P>

<P>Així, per extreure una clau de <CODE>PGP 2.6.x</CODE>:
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ pgp -kx UID fitxer anell
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>per exemple:</P>
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ pgp -kx Pepe clavepepe2 ~/.pgp/pubring.pgp
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>

<P>Aquesta operació ens donaria el fitxer clavepepe2.pgp. Per extreure'n la
nostra clau privada, no hauríem de fer cap altra cosa que indicar el nostre
UID i el fitxer de les claus privades <CODE>~/.pgp/secring.pgp</CODE>. No em
consta que hi hagi cap manera d'indicar més d'un UID amb <CODE>PGP 2.6.3</CODE>, si
en sabeu alguna, si us plau envieu-me un
<A HREF="mailto:homega@ciberia.es">mensaje</A> (NT: adreça de
correu de l'autor d'aquesta secció i de la traducció a la versió castellana
del document).</P>

<P>Una vegada s'ha extret la clau només s'ha d'importar al fitxer de 
<CODE>GnuPG</CODE>:</P>
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ gpg --import clavepepe2
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>Per extreure una clau de <CODE>PGP 5.0</CODE>:</P>
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ pgpk -x UID -o fitxer
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>per exemple:</P>
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ pgpk -x Pepe -o clavepepe5
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>En aquest cas, el fitxer per defecte és el de claus públiques, i obtindríem
el fitxer clavepepe5 tal i com hem indicat.</P>

<P>Una vegada més, només ens queda importar la clau:</P>
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ gpg --import clavepepe5
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>Ja que <CODE>PGP 5.0</CODE> no ens permet indicar el fitxer sobre el que volem
operar, la extracció de la clau privada es complica una miqueta. La solució
ve donada per un sistema superior com el de GnuPG:</P>

<P>Aquest procediment posa en risc la clau privada durant un breu període
de temps, així que no hauria de ser emprat en un sistema multiusuari o
públic. Els passos a seguir són:</P>
<P>
<UL>
<LI>Extreure la clau pública corresponent a la clau provada que volem
exportar, i importar-la a <CODE>GnuPG</CODE>.</LI>
<LI>Esborrar la contrasenya de la clau privada!! (es recomana fer una
còpia de seguretat del fitxer secring.skr):</LI>
</UL>
</P>
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ pgpk -e UID
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>per exemple:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ pgpk -e 0x614DB9FA

sec  1024 0x614DB9FA 1998-03-22 ---------- DSS        Sign &amp; Encrypt

sub  1024 0x2B9E0571 1998-03-22 ---------- Diffie-Hellman

uid  Horacio &lt;homega@vlc.servicom.es&gt;

uid  Horacio &lt;homega@correo.com&gt;


1024 bits, Key ID 0x614DB9FA, created 1998-03-22

"Horacio &lt;homega@vlc.servicom.es&gt;"

"Horacio &lt;homega@correo.com&gt;"
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
Do you want to unset this key as axiomatic [y/N]? N

Do you want to unset this key as axiomatic [y/N]? N

Do you want to add a new user ID [y/N]? N

Do you want to change your pass phrase (y/N)? Y
Need old passphrase. Enter pass phrase: &lt;introduïu la contrasenya&gt;
Need new passphrase. Enter pass phrase: &lt;deixeu-ho buit&gt;
Enter it a second time. Enter pass phrase: &lt;deixeu-ho buit&gt;
Changing master key passphrase...

Changing subkey passphrase...

Do want to set this as your default key [y/N]? N

Keyrings updated.
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>
<UL>
<LI>El pas següent és exportar la clau privada. Com ja hem pogut veure,
<CODE>PGP 5.0</CODE> és incapaç de fer-ho, així que emprarem <CODE>GnuPG</CODE>:</LI>
</UL>
</P>
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ gpg --export-secret-keys --secret-key-ring ~/.pgp/secring.skr 0x614DB9FA &gt; lamevaclau
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>Tot això en una sola línia, i es crearà el fitxer <CODE>lamevaclau</CODE>.</P>
<P>
<UL>
<LI>Ara ja podem importar la clau privada a GnuPG:</LI>
</UL>
</P>
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ gpg --import &lt; lamevaclau
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>Swguidament torneu a introduir una contrasenya a la clau des de <CODE>GnuPG</CODE>.</P>

<H2><A NAME="GPGMiniHowto-AnellsPGP"></A> <A NAME="ss6.4">6.4 Emprar anells de claus de PGP amb GnuPG</A>
</H2>

<P>És possible evitar tota aquesta operació anterior, mantenint
instal·lades les diferents versions de <CODE>PGP</CODE> al mateix temps que la de
<CODE>GnuPG</CODE>. Essent <CODE>GnuPG</CODE> un sistema superior i més nou, pot reconéixer
els anells de claus de <CODE>PGP</CODE> com a propis.</P>

<P>En el cas de <CODE>PGP 5.0</CODE>, n'hi ha prou amb afegir la ruta d'accés
completa als fitxers de claus de <CODE>PGP 5.0</CODE>, precedit per <CODE>keyring</CODE> o 
<CODE>secret-keyring</CODE>, al final del fitxer <CODE>~/.gnupg/options</CODE> segons
correspongui:</P>
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
keyring ~/.pgp/pubring.pkr
secret-keyring ~/.pgp/secring.skr
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>Els fitxers de claus de <CODE>PGP 2.6.3</CODE> són reconeguts per <CODE>GnuPG</CODE> per
defecto. Si això no fos així, només caldria repetir la mateixa operació
anterior adaptant-la a les circumstàncies:</P>
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
keyring ~/.pgp/pubring.pgp
secret-keyring ~/.pgp/secring.pgp
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>Si a continuació feu un llistat de les claus públiques amb <CODE>GnuPG</CODE>,
observareu que llegeix els tres fitxers, <CODE>~/.gnupg/pubring.gpg</CODE>,
<CODE>~/.pgp/pubring.pkr</CODE>, y <CODE>~/pubring.pgp</CODE>:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ gpg --list-keys

     /home/usuario/.gnupg/pubring.gpg
     --------------------------------
     pub 1024D/57548DCD 1998-07-07 Werner Koch (gnupg sig)
     &lt;dd9jn@gnu.org&gt;
     pub 1024D/A95AF46C 1998-11-29 Brenno J.S.A.A.F. de Winter
     &lt;brenno@dewinter.com&gt;
     sub 3072g/A3CA62A0 1998-11-29

   (... y demás claves públicas DSA/ElGamal...)

     /home/usuario/.pgp/pubring.pkr
     ------------------------------
     pub 1024D/FAEBD5FC 1997-04-07 Philip R. Zimmermann &lt;prz@pgp.com&gt;
     sub 2048g/42F0A0A0 1997-04-07

   (... etc DSS/Diffie-Helman...)

     /home/usuario/.pgp/pubring.pgp
     ------------------------------
     pub 1024R/88A17FF5 1995-09-11 IRIS-CERT, Spain

   (... etc RSA...)
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>El mateix succeïria amb les claus privades:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ gpg --list-secret-keys

     /home/horacio/.gnupg/secring.gpg
     --------------------------------
     sec 1024D/42337AE6 1999-03-14 Horacio (comentari)
     &lt;homega@vlc.servicom.es&gt;
     ssb 2048g/1F177864 1999-03-14

     /home/horacio/.pgp/secring.skr
     ------------------------------
     sec 1024D/7992AB40 1998-05-04 Horacio &lt;homega@vlc.servicom.es&gt;
     uid Horacio &lt;homega@correo.com&gt;
     ssb 2048g/917366AE 1998-05-04

     /home/horacio/.pgp/secring.pgp
     ------------------------------
     sec 1024R/32D4A925 1997-09-23 Horacio &lt;homega@vlc.servicom.es&gt;
</PRE>
</CODE></BLOCKQUOTE>
</P>



<H2><A NAME="GPGMinihowto-Frontends"></A> <A NAME="s7">7. Interfícies gràfiques</A></H2>

<P>Per fer més fàcil l'ús de GnuPG, teniu una àmplia varietat de
programes que empren o són compatibles amb el xifratge de GnuPG.  Hi ha
interfícies gràfiques que permeten administrar les claus amb el ratolí i
també hi ha molts MUA (Mail User Agents) que permeten xifrar i signar
missatges de correu electrònic de forma molt senzilla.  Hi ha una
llista quasi bé completa de front ends a la pàgina
<A HREF="http://www.gnupg.org/frontends.html">GnuPG Frontends</A>.
En destacarem alguns d'ells a continuació.</P>

<H2><A NAME="ss7.1">7.1 Interfícies gràfiques</A>
</H2>

<H3>GPA</H3>

<P>
<A HREF="http://www.gnupg.org/gpa.html">GPA</A>, <EM>GNU
Privacy Assistant</EM> és una interfície d'usuari gràfica per Gnu
Privacy Guard (GnuPG). Aquest és el front end gràfic estàndard que
ofereix el projecte GnuPG. Amb GPA, podeu veure el vostre anell de
claus, importar i exportar claus, generar claus, editar-ne les
propietats i xifrar, signar o desxifrar documents.</P>
<P>Instal·lar GPA és senzill. Descarregueu-ne el codi font comprimit,
descomprimiu-lo i llavors executeu l'ordre:
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ ./configure; make
# make install
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>Executeu el programa escrivint: 
<BLOCKQUOTE><CODE>
<HR>
<PRE>
$ gpa
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>

<H3>Seahorse</H3>

<P>
<A HREF="http://seahorse.sourceforge.net/">Seahorse</A>
és una interfície gràfica de GnuPG per a GNOME. Es pot emprar per signar,
xifrar, verificar i desxifrar text i fitxers. El text es pot obtenir
del porta-retalls, o el podeu escriure directament en el petit editor
que porta. Seahorse és també un gestor de claus que es pot utilitzar
per editar quasi bé totes les propietats de les claus que
emmagatzemeu en el vostre anell de claus.</P>
<P>Podeu instal·lar Seahorse mitjançant un paquet per a la vostra
distribució, o bé descarregant-vos un fitxer comprimit amb el codi
font. Instal·lar l'aplicació des del codi font es fa com amb qualsevol
altre paquet. Descarregeu-lo, descomprimiu-lo, executeu <CODE>configure</CODE>
i feu <CODE>make install</CODE>. La instal·lació es fa sota el directori
<CODE>/usr/local</CODE> i inserta un element de menú al menú d'aplicacions
de GNOME.</P>

<H3>Geheimnis</H3>

<P>
<A HREF="http://geheimnis.sourceforge.net/">Geheimnis</A>
és un front-end per GNUPG que està basat en KDE. Se suposa que té totes les
funcions de GPA i Seahorse. Lamentablement, quan vaig provar de compilar el
programa em vaig quedar encallat perquè em mancava una lliberia
(/usr/lib/libfam.la).</P>

<H2><A NAME="ss7.2">7.2 Programes de correu electrònic </A>
</H2>

<P>Els programes de correu electrònic (o MUAs) més populars permeten
l'ús de GnuPG. Entre aquests, hi ha almenys els següents:
<UL>
<LI>Evolution</LI>
<LI>Balsa</LI>
<LI>Mozilla</LI>
<LI>Pine</LI>
<LI>Kmail</LI>
<LI>Eudora</LI>
<LI>Mutt</LI>
<LI>exmh</LI>
</UL>
</P>
<P>Amb tota certesa n'hi ha molts més, però és quasi bé impossible
provar-los tots.</P>

<P>Emprant GnuPG des del vostre programa de correu us permet
desxifrar missatges de correu electrònic que us enviïn xifrats amb la
vostra clau pública, signar els vostres missatges per tal que el
destinatari pugui estar segur que en sou l'autor i xifrar el vostre
correu electrònic amb les claus públiques dels destinataris.</P>

<H3>Evolution</H3>

<P>Evolution, el programa més corrent per GNOME, conté integrada la
possibilitat d'emprar el xifratge de GnuPG i de PGP.  Per poder-lo
configurar per tal de poder signar i desxifrar missatges, heu d'introduir
el vostre ID d'usuari a la pestanya 'Seguretat' de les propietats del
compte de correu.</P>
<P>Quan envieu un nou missatge no l'estareu signant o xifrant per defecte. Per
fer-ho, heu de seleccionar 'Signa amb PGP' i 'Xifra amb PGP' del menú
'Seguretat'.</P>
<P>En rebre un missatge signat o xifrat, es desxifrarà automàticament i
apareixerà un candau al final del text. Si premeu el candau, es
verificarà la signatura i us mostrarà si és correcta o no.</P>


<H3>Mozilla i Enigmail </H3>

<P>Mozilla no inclou la possibilitat d'emprar GnuPG per ell mateix. Per
emprar el xifrat GnuPG amb Mozilla, heu d'instal·lar un connector, com 
<A HREF="http://enigmail.mozdev.org/">EnigMail</A>.  Enigmail és
un connector per Mozilla/Netscape Mail que permet als usuaris accedir a les
característiques d'autentificació i xifrat que facilita el programari GPG i
PGP. Enigmail és capaç de xifrar i signar correu electrònic en enviar-lo, i
també de desxifrar i verificar el correu rebut. També és capaç d'importar i
exportar claus privades.</P>

<P>Instal·lar EnigMail en un sistema RedHat Linux és especialment senzill,
ja que hi ha RPM disponibles per les darreres versions de Mozilla. S'han
d'instal·lar dos paquets: <CODE>mozilla-enigmail-0.39-3.i386.rpm</CODE> i 
<CODE>mozilla-ipc-0.99-0_rh7x.rpm</CODE>. Després d'instal·lar aquests RPM,
reinicieu Mozilla (o Netscape 6.x) i hauríeu de ser capaços d'emprar GnuPG
en el vostre correu electrònic. Tingueu en compte, però, que EnigMail només
xifra el text del vostre missatge. No xifra els afegits; haureu de xifrar
qualsevol fitxer que vulgueu afegir separadament. En altres sistemes,
probablement haureu d'instal·lar EnigMail a partir del codi font.</P>

<H3>Kmail</H3>

<P>Kmail, el programa de correu electrònic més corrent per KDE conté
integrada la possibilitat d'emprar el xifratge de GnuPG i PGP. Per poder-lo
configurar per tal de poder signar i desxifrar missatges, heu d'introduir
el vostre ID d'usuari a la secció 'Identitat' de la configuració de Kmail.
Quan envieu un nou missatge no l'estareu signant o xifrant per defecte. Per
fer-ho, heu de seleccionar els butons 'Signa el missatge' i 'Xifra el
missatge' de la barra d'eines.</P>

<H2><A NAME="GPGMinihowto-FontsInformacio"></A> <A NAME="s8">8. Fonts d'informació</A></H2>

<H2><A NAME="ss8.1">8.1 GnuPG</A>
</H2>

<P>
<UL>
<LI>La 
<A HREF="http://www.gnupg.org">pàgina web de GnuPG</A></LI>
<LI>La llista de correu electrònic de GnuPG, incloent la possibilitat de
consultar els missatges antics i les descripcions a 
<A HREF="http://www.gnupg.org/docs.html">la pàgina web de GnuPG</A>.
</LI>
<LI>La informació del project GnuPG (actualitzada fins la versió 0.9.2),
tot i que encara no està prou acabada. I no s'ha d'oblidar: 
<BLOCKQUOTE><CODE>
<PRE>
gpg --help
</PRE>
</CODE></BLOCKQUOTE>
. Aquesta és una font de molt de
valor.</LI>
</UL>
</P>

<H2><A NAME="ss8.2">8.2 PGP</A>
</H2>

<P>PGP és el programa de criptografia més antic que (encara) està
àmpliament extès. Durant aquest temps s'han publicat nombrosos documents.
Aquesta informació és molt útil. Molta d'aquesta informació és tan general
que la podeu aplicar a GnuPG també. Mireu-vos les adreces següents per
obtenir aquests documents:</P>
<P>
<UL>
<LI>La 
<A HREF="http://www.pgpi.com">pàgina web internacional de PGP</A></LI>
<LI>La pàgina de 
<A HREF="http://www.hertreg.ac.uk/ss/pgpfaq.html">preguntes més freqüents de PGP DH vs. RSA</A>
conté informació de les diferències entre aquests dos algoritmes. Aquests
són els dos algoritmes que utilitza GnuPG.</LI>
</UL>
</P>

<H2><A NAME="ss8.3">8.3 Servidors de claus</A>
</H2>

<P>
<UL>
<LI> 
<A HREF="http://www.keyserver.net">Keyserver.net</A></LI>
<LI> 
<A HREF="http://wwwkeys.eu.pgp.net">http://wwwkeys.eu.pgp.net</A></LI>
</UL>
</P>

<H2><A NAME="ss8.4">8.4 Llibres</A>
</H2>

<P>
<UL>
<LI>B. Schneier, &quot;Applied Cryptography, Second
Edition&quot;, Wiley, 1996 
<A NAME="BSchneier"></A>  Deutsche Ausgabe
unter dem Titel &quot;Angewandte Kryptographie&quot;, Addison-Wesley,
1996</LI>
</UL>
</P>


<H2><A NAME="s9">9. A propòsit d'aquest document</A></H2>

<P>Copyright &copy; 2002 Josep Monés i Teixidor (versió en català)<BR>
Copyright &copy; 2002 Arjen Baart (versió en neerlandès)<BR>
Copyright &copy; 1999 J.H. M.G. (versió en castellà)<BR>
Copyright &copy; 1999 Brenno J.S.A.A.F. de Winter (versió en anglès)<BR>
Copyright &copy; 1999 Michael Fischer v. Mollard (versió original en alemany)</P>



<P>Aquest document és documentació lliure i es pot redistribuir i/o modificar
sota les condicions de la GNU Library General Public License, segons ha
publicat la Free Software Foundation; en la seva versió 2, o (si ho
preferiu) en qualsevol versió posterior.</P>
<P>Aquest document es distribueix esperant que serà útil, però SENSE CAP
GARANTIA. Vegeu la "GNU Library General Public License"
(
<A HREF="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</A>)
per obtenir-ne més detalls. Podeu obtenir-ne una traducció aproximada i NO OFICIAL al català a
<A HREF="http://ca.dodds.net/gnu/gpl.ca.html">http://ca.dodds.net/gnu/gpl.ca.html</A>.</P>

<P>Hauríeu d'haver rebut una còpia de la "GNU Library General Public License"
amb la distribució d'aquest document; si no és així, podeu demanar-la
escriguent a:</P>
<P>
<HR>
<PRE>
Free Software Foundation, Inc.
59 Temple Place - Suite 330
Boston, MA 02111-1307
USA
</PRE>
<HR>
</P>


<H2><A NAME="ss9.1">9.1 Versions</A>
</H2>

<P>Versió original en alemany: la <B>versió 0.1</B> va
ser la primer versió en alemany.</P>
<P>Tots els canvis per la versió original, en alemany, estan documentats
en un fitxer diff: 
<A HREF="http://www.stud.uni-goettingen.de/~s070674/GnuPGMiniHowto/">dieses Dokument</A></P>

<P>
<UL>
<LI><B>Anglès versió 0.1.0</B>, del 30 d'abril del 1999.
Aquesta versió és una traducció de la versió alemanya a l'anglès, amb
alguns canvis.</LI>
<LI><B>Alemany versió 0.1.1</B>
<UL>
<LI>Nova secció &laquo;Límits de seguretat&raquo;</LI>
<LI>Explicació de les signatures millorada</LI>
<LI>Alguns canvis suggerits per Werner Koch (gràcies!)</LI>
</UL>
</LI>
<LI><B>Castellà versió 0.1.2</B>, del 29 de maig del 1999. 
<UL>
<LI>Aquesta versió en castellà és la traducció de la versió
anglesa, i s'han fet alguns canvis.</LI>
<LI>S'ha afegit el capítol sobre comptabilitat i
interoperabilitat de <CODE>GnuPG</CODE> amb <CODE>PGP</CODE>.</LI>
</UL>
</LI>
<LI><B>Castellà versió 0.1.3</B>, del 28 de setembre de 1999.
<UL>
<LI>S'ha reescrit a codi SGML (LinuxDoc) des del codi HTML.</LI>
<LI>Correcció d'alguns errors en castellà.</LI>
</UL>

</LI>
<LI><B>Anglès versió 0.1.2</B>, del 3 d'abril del 2002.
<UL>
<LI>S'han corregit algunes faltes.</LI>
<LI>Nova secció sobre interfícies d'usuari.</LI>
</UL>

</LI>
<LI><B>Holandès versió 0.1.3</B>, del 17 de maig del 2002.
<UL>
<LI>Traducció de la versió anglesa a l'holandès.</LI>
</UL>
</LI>
<LI><B>Català versió 0.1.3</B>, del 10 de desembre del 2002.
<UL>
<LI>Traducció de la versió anglesa al català (amb molta
influència de les modificacions realitzades en la versió
castellana).</LI>
</UL>
</LI>
</UL>
        </P>
<P><B>Notes per a la versió catalana:</B> Podeu enviar qualsevol suggeriment o
comentari sobre aquest document a Josep Monés i Teixidor (<CODE>
<A HREF="mailto:jmones@puntbarra.com">mailto:jmones@puntbarra.com</A></CODE>). Qualsevol comentari o correció és
benvingut.</P>
<P><B>Notes per a la versió castellana:</B>  Cualquier comentario o corrección al 
documento que ayude a mejorarlo es bienvenido.  Por favor, enviad cualquier
sugerencia a 
<A HREF="mailto:homega@ciberia.es">&lt;homega@ciberia.es&gt;</A>.</P>
<P><B>Notes per a la versió anglesa i neerlandesa:</B>  All
remarks for this document can be sent to Brenno J.S.A.A.F. de Winter
(<CODE>
<A HREF="mailto:brenno@dewinter.com">brenno@dewinter.com</A></CODE>).  or Arjen Baart (<CODE>
<A HREF="mailto:arjen@andromeda.nl">arjen@andromeda.nl</A></CODE>).
Comments help us make a better document and are greatly appreciated.</P>
<P><B>Notes per a la versió alemanya:</B>  Anregungen, Kritik, Verbesserungen und
Erweiterungen einfach an Michael Fischer v. Mollard 
<A HREF="mailto:fischer@math.uni-goettingen.de">&lt;fischer@math.uni-goettingen.de&gt;</A> senden, damit dieses Dokument
weiter verbessert werden kann.</P>



</BODY>
</HTML>
